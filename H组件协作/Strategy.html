<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>策略模式 |  设计模式</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content=" 李建忠---可复用的软件设计">
    <link rel="preload" href="/design-patterns/assets/css/0.styles.ccbe7424.css" as="style"><link rel="preload" href="/design-patterns/assets/js/app.3c2122e4.js" as="script"><link rel="preload" href="/design-patterns/assets/js/2.5c19d7f6.js" as="script"><link rel="preload" href="/design-patterns/assets/js/17.e1316d3a.js" as="script"><link rel="prefetch" href="/design-patterns/assets/js/10.f2270f53.js"><link rel="prefetch" href="/design-patterns/assets/js/11.34f2522a.js"><link rel="prefetch" href="/design-patterns/assets/js/12.89ecd73c.js"><link rel="prefetch" href="/design-patterns/assets/js/13.9297cc82.js"><link rel="prefetch" href="/design-patterns/assets/js/14.63b07680.js"><link rel="prefetch" href="/design-patterns/assets/js/15.c93a8fed.js"><link rel="prefetch" href="/design-patterns/assets/js/16.8657b6f0.js"><link rel="prefetch" href="/design-patterns/assets/js/18.95bac3f8.js"><link rel="prefetch" href="/design-patterns/assets/js/19.bbf8f541.js"><link rel="prefetch" href="/design-patterns/assets/js/20.a94c428a.js"><link rel="prefetch" href="/design-patterns/assets/js/3.6dca2ed9.js"><link rel="prefetch" href="/design-patterns/assets/js/4.25df9a0a.js"><link rel="prefetch" href="/design-patterns/assets/js/5.274adcae.js"><link rel="prefetch" href="/design-patterns/assets/js/6.96f9b8c9.js"><link rel="prefetch" href="/design-patterns/assets/js/7.b37556e5.js"><link rel="prefetch" href="/design-patterns/assets/js/8.cf52c015.js"><link rel="prefetch" href="/design-patterns/assets/js/9.4ed1167f.js">
    <link rel="stylesheet" href="/design-patterns/assets/css/0.styles.ccbe7424.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/design-patterns/" class="home-link router-link-active"><!----> <span class="site-name"> 设计模式</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/design-patterns/home/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/design-patterns/H5/" class="nav-link">
  H5
</a></div><div class="nav-item"><a href="/design-patterns/Standard/" class="nav-link">
  规范
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/design-patterns/home/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/design-patterns/H5/" class="nav-link">
  H5
</a></div><div class="nav-item"><a href="/design-patterns/Standard/" class="nav-link">
  规范
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Design Principles</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Creational Patterns</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Architectural Patterns</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Behavior Patterns</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>H组件协作</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/design-patterns/H组件协作/Strategy.html" class="active sidebar-link">策略模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design-patterns/H组件协作/Strategy.html#模式定义" class="sidebar-link">模式定义</a></li><li class="sidebar-sub-header"><a href="/design-patterns/H组件协作/Strategy.html#要点总结" class="sidebar-link">要点总结</a></li><li class="sidebar-sub-header"><a href="/design-patterns/H组件协作/Strategy.html#由遇到的问题引出策略模式" class="sidebar-link">由遇到的问题引出策略模式</a></li><li class="sidebar-sub-header"><a href="/design-patterns/H组件协作/Strategy.html#关于策略模式的讨论" class="sidebar-link">关于策略模式的讨论</a></li></ul></li><li><a href="/design-patterns/H组件协作/TemplateMethod.html" class="sidebar-link">模板方法</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="策略模式"><a href="#策略模式" class="header-anchor">#</a> 策略模式</h1> <h2 id="模式定义"><a href="#模式定义" class="header-anchor">#</a> 模式定义</h2> <p>定义一系列算法,把它们一个个封装起来,并且使它们可互
相替换(变化)。该模式使得算法可独立于使用它的客户程
序(稳定)而变化(扩展,子类化)。</p> <h2 id="要点总结"><a href="#要点总结" class="header-anchor">#</a> 要点总结</h2> <p>Strategy及其子类为组件提供了一系列可重用的算法,从而可以使
得类型在运行时方便地根据需要在各个算法之间进行切换。
<strong>Strategy模式提供了用条件判断语句以外的另一种选择,消除条件</strong> <strong>判断语句,就是在解耦合。含有许多条件判断语句的代码通常都需</strong> <strong>要Strategy模式。</strong>
如果Strategy对象没有实例变量,那么各个上下文可以共享同一个
Strategy对象,从而节省对象开销。</p> <h2 id="由遇到的问题引出策略模式"><a href="#由遇到的问题引出策略模式" class="header-anchor">#</a> 由遇到的问题引出策略模式</h2> <p>策略模式和 Template 模式要解决的问题是相同（类似）的，都是为了给业务逻辑（算法）具体实现和抽象接口之间的解耦。策略模式将逻辑（算法）封装到一个类（Context）里面，通过组合的方式将具体算法的实现在组合对象中实现，再通过委托的方式将抽象接口的实现委托给组合对象实现。State 模式也有类似的功能，他们之间的区别将在讨论中给出。</p> <p><strong>这里的关键就是将算法的逻辑抽象接口（DoAction）封装到一个类中（Context），再通过委托的方式将具体的算法实现委托给具体的策略类来实现（ConcreteStrategeA类）。</strong></p> <h2 id="关于策略模式的讨论"><a href="#关于策略模式的讨论" class="header-anchor">#</a> 关于策略模式的讨论</h2> <p>可以看到策略模式和 Template 模式解决了类似的问题，也正如在 Template 模式中分析的，<strong>策略模式和 Template 模式实际是实现一个抽象接口的两种方式：继承和组合之间的区别。要实现一个抽象接口，继承是一种方式：我们将抽象接口声明在基类中，将具体的实现放在具体子类中。组合（委托）是另外一种方式：我们将接口的实现放在被组合对象中，将抽象接口放在组合类中。这两种方式各有优缺点，先列出来：</strong>
继承：
优点：易于修改和扩展那些被复用的实现。
缺点：①破坏了封装性，继承中父类的实现细节暴露给子类了；②&quot;白盒&quot;复用，原因在 1）中；③当父类的实现更改时，其所有子类将不得不随之改变；④从父类继承而来的实现在运行期间不能改变（编译期间就已经确定了）。
组合：
优点：①&quot;黑盒&quot;复用，因为被包含对象的内部细节对外是不可见的；②封装性好，原因为 1）；③实现和抽象的依赖性很小（组合对象和被组合对象之间的依赖性小）；④可以在运行期间动态定义实现（通过一个指向相同类型的指针，典型的是抽象基类的指针）。
缺点：系统中对象过多。</p> <p>从上面对比中我们可以看出，组合相比继承可以取得更好的效果，因此在面向对象的设计中的有一条很重要的原则就是：优先使用（对象）组合，而非（类）继承（FavorComposition Over Inheritance）。</p> <p>实际上，继承是一种强制性很强的方式，因此也使得基类和具体子类之间的耦合性很强。例如在模板方法模式中在 ConcreteClass1 中定义的原语操作别的类是不能够直接复用（除非你继承自 AbstractClass，具体分析请参看模板方法模式文档）。而组合（委托）的方式则有很小的耦合性，实现（具体实现）和接口（抽象接口）之间的依赖性很小，例如在本实现中，ConcreteStrategyA 的具体实现操作很容易被别的类复用，例如我们要定义另一个 Context 类 AnotherContext，只要组合一个指向策略的指针就可以很容易地复用 ConcreteStrategyA 的实现了。</p> <p>我们在 桥接模式的问题和桥接模式的分析中，正是说明了继承和组合之间的区别。请参看相应模式解析。</p> <p>另外策略模式很状态模式也有相似之处，但是状态模式注重的对象在不同的状态下不同的操作。两者之间的区别就是状态模式中具体实现类中有一个指向 Context的引用，而策略模式则没有。具体分析请参看相应的状态模式分析中。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/design-patterns/4-behavior-patterns/1.Observer.html" class="prev">
        观察者模式
      </a></span> <span class="next"><a href="/design-patterns/H组件协作/TemplateMethod.html">
        模板方法
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/design-patterns/assets/js/app.3c2122e4.js" defer></script><script src="/design-patterns/assets/js/2.5c19d7f6.js" defer></script><script src="/design-patterns/assets/js/17.e1316d3a.js" defer></script>
  </body>
</html>
