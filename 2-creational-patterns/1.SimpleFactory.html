<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>简单工厂模式 |  设计模式</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content=" 李建忠---可复用的软件设计">
    <link rel="preload" href="/design-patterns/assets/css/0.styles.ccbe7424.css" as="style"><link rel="preload" href="/design-patterns/assets/js/app.3c2122e4.js" as="script"><link rel="preload" href="/design-patterns/assets/js/2.5c19d7f6.js" as="script"><link rel="preload" href="/design-patterns/assets/js/8.cf52c015.js" as="script"><link rel="prefetch" href="/design-patterns/assets/js/10.f2270f53.js"><link rel="prefetch" href="/design-patterns/assets/js/11.34f2522a.js"><link rel="prefetch" href="/design-patterns/assets/js/12.89ecd73c.js"><link rel="prefetch" href="/design-patterns/assets/js/13.9297cc82.js"><link rel="prefetch" href="/design-patterns/assets/js/14.63b07680.js"><link rel="prefetch" href="/design-patterns/assets/js/15.c93a8fed.js"><link rel="prefetch" href="/design-patterns/assets/js/16.8657b6f0.js"><link rel="prefetch" href="/design-patterns/assets/js/17.e1316d3a.js"><link rel="prefetch" href="/design-patterns/assets/js/18.95bac3f8.js"><link rel="prefetch" href="/design-patterns/assets/js/19.bbf8f541.js"><link rel="prefetch" href="/design-patterns/assets/js/20.a94c428a.js"><link rel="prefetch" href="/design-patterns/assets/js/3.6dca2ed9.js"><link rel="prefetch" href="/design-patterns/assets/js/4.25df9a0a.js"><link rel="prefetch" href="/design-patterns/assets/js/5.274adcae.js"><link rel="prefetch" href="/design-patterns/assets/js/6.96f9b8c9.js"><link rel="prefetch" href="/design-patterns/assets/js/7.b37556e5.js"><link rel="prefetch" href="/design-patterns/assets/js/9.4ed1167f.js">
    <link rel="stylesheet" href="/design-patterns/assets/css/0.styles.ccbe7424.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/design-patterns/" class="home-link router-link-active"><!----> <span class="site-name"> 设计模式</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/design-patterns/home/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/design-patterns/H5/" class="nav-link">
  H5
</a></div><div class="nav-item"><a href="/design-patterns/Standard/" class="nav-link">
  规范
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/design-patterns/home/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/design-patterns/H5/" class="nav-link">
  H5
</a></div><div class="nav-item"><a href="/design-patterns/Standard/" class="nav-link">
  规范
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Design Principles</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Creational Patterns</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/design-patterns/2-creational-patterns/" aria-current="page" class="sidebar-link">创建者模式</a></li><li><a href="/design-patterns/2-creational-patterns/1.SimpleFactory.html" aria-current="page" class="active sidebar-link">简单工厂模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design-patterns/2-creational-patterns/1.SimpleFactory.html#场景" class="sidebar-link">场景</a></li><li class="sidebar-sub-header"><a href="/design-patterns/2-creational-patterns/1.SimpleFactory.html#定义" class="sidebar-link">定义</a></li><li class="sidebar-sub-header"><a href="/design-patterns/2-creational-patterns/1.SimpleFactory.html#角色" class="sidebar-link">角色</a></li><li class="sidebar-sub-header"><a href="/design-patterns/2-creational-patterns/1.SimpleFactory.html#代码" class="sidebar-link">代码</a></li><li class="sidebar-sub-header"><a href="/design-patterns/2-creational-patterns/1.SimpleFactory.html#优点" class="sidebar-link">优点</a></li><li class="sidebar-sub-header"><a href="/design-patterns/2-creational-patterns/1.SimpleFactory.html#缺点" class="sidebar-link">缺点</a></li><li class="sidebar-sub-header"><a href="/design-patterns/2-creational-patterns/1.SimpleFactory.html#适用环境" class="sidebar-link">适用环境</a></li><li class="sidebar-sub-header"><a href="/design-patterns/2-creational-patterns/1.SimpleFactory.html#应用" class="sidebar-link">## 应用</a></li><li class="sidebar-sub-header"><a href="/design-patterns/2-creational-patterns/1.SimpleFactory.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/design-patterns/2-creational-patterns/2.FactoryMethod.html" class="sidebar-link">工厂方法模式</a></li><li><a href="/design-patterns/2-creational-patterns/3.AbstractFactory.html" class="sidebar-link">抽象工厂模式</a></li><li><a href="/design-patterns/2-creational-patterns/4.singleton.html" class="sidebar-link">单例模式</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Architectural Patterns</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Behavior Patterns</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>H组件协作</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="简单工厂模式"><a href="#简单工厂模式" class="header-anchor">#</a> 简单工厂模式</h1> <h2 id="场景"><a href="#场景" class="header-anchor">#</a> 场景</h2> <blockquote><p>考虑一个简单的软件应用场景，一个软件系统可以提供多个外观不同的按钮（如圆形按钮、矩形按钮、菱形按钮等）， 这些按钮都源自同一个基类，不过在继承基类后不同的子类修改了部分属性从而使得它们可以呈现不同的外观，如果我们希望在使用这些按钮时，不需要知道这些具体按钮类的名字，只需要知道表示该按钮类的一个参数，并提供一个调用方便的方法，把该参数传入方法即可返回一个相应的按钮对象，此时，就可以使用简单工厂模式。</p></blockquote> <h2 id="定义"><a href="#定义" class="header-anchor">#</a> 定义</h2> <ol><li><p>根据不同的参数返回不同的类的实例</p></li> <li><p>实例存在一个共同的父类</p></li> <li><p>==存在一个<strong>静态方法类</strong>负责创建其他类的实例==</p></li></ol> <h2 id="角色"><a href="#角色" class="header-anchor">#</a> 角色</h2> <ol><li><p>抽象产品父类</p></li> <li><p>具体产品角色</p></li> <li><p>工厂角色</p></li></ol> <h2 id="代码"><a href="#代码" class="header-anchor">#</a> 代码</h2> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">///////////////////////////////////////////////////////////</span>
<span class="token comment">//  Factory.cpp</span>
<span class="token comment">//  Implementation of the Class Factory</span>
<span class="token comment">//  Created on:      01-十月-2014 18:41:33</span>
<span class="token comment">//  Original author: colin</span>
<span class="token comment">///////////////////////////////////////////////////////////</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;Factory.h&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;ConcreteProductA.h&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;ConcreteProductB.h&quot;</span></span>
Product<span class="token operator">*</span> <span class="token class-name">Factory</span><span class="token operator">::</span><span class="token function">createProduct</span><span class="token punctuation">(</span>string proname<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">==</span> proname <span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token function">ProductA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;B&quot;</span> <span class="token operator">==</span> proname<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token function">ProductB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span>  <span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="优点"><a href="#优点" class="header-anchor">#</a> 优点</h2> <ol><li><strong>客户端可以免除直接创建产品对象的责任</strong>，而仅仅“消费”产品；简单工厂模式通过这种做法实现了对责任的分割，它提供了专门的工厂类用于创建对象。</li> <li><strong>通过引入配置文件，可以在不修改任何客户端代码的情况下更换和增加新的具体产品类</strong>，在一定程度上提高了系统的灵活性</li></ol> <h2 id="缺点"><a href="#缺点" class="header-anchor">#</a> 缺点</h2> <ol><li>由于工厂类集中了所有产品创建逻辑，一旦不能正常工作，整个系统都要受到影响。</li> <li>使用简单工厂模式将会增加系统中类的个数，在一定程序上增加了系统的复杂度和理解难度。</li> <li>一旦添加新产品就不得不修改工厂逻辑，在产品类型较多时，有可能造成工厂逻辑过于复杂，不利于系统的扩展和维护。</li></ol> <h2 id="适用环境"><a href="#适用环境" class="header-anchor">#</a> 适用环境</h2> <ol><li><p>工厂类负责创建的对象比较少：由于创建的对象较少，不会造成工厂方法中的业务逻辑太过复杂。</p></li> <li><p>客户端只知道传入工厂类的参数，对于如何创建对象不关心：客户端既不需要关心创建细节，甚至连类名都不需要记住，只需要知道类型所对应的参数。</p></li></ol> <h2 id="应用"><a href="#应用" class="header-anchor">#</a> ## 应用</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">DateFormat</span> <span class="token function">getDateInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">DateFormat</span> <span class="token function">getDateInstance</span><span class="token punctuation">(</span><span class="token keyword">int</span> style<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">DateFormat</span> <span class="token function">getDateInstance</span><span class="token punctuation">(</span><span class="token keyword">int</span> style<span class="token punctuation">,</span><span class="token class-name">Locale</span> locale<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token class-name">KeyGenerator</span> keyGen<span class="token operator">=</span><span class="token class-name">KeyGenerator</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">&quot;DESede&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Cipher</span> cp<span class="token operator">=</span><span class="token class-name">Cipher</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">&quot;DESede&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>简单工厂模式包含三个角色：</p> <div class="language-highlight extra-class"><pre class="language-text"><code>1. 工厂角色负责实现创建所有实例的内部逻辑；
2. 抽象产品角色是所创建的所有对象的父类，负责描述所有实例所共有的公共接口；
3. 具体产品角色是创建目标，所有创建的对象都充当这个角色的某个具体类的实例。
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/design-patterns/2-creational-patterns/" class="prev router-link-active">
        创建者模式
      </a></span> <span class="next"><a href="/design-patterns/2-creational-patterns/2.FactoryMethod.html">
        工厂方法模式
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/design-patterns/assets/js/app.3c2122e4.js" defer></script><script src="/design-patterns/assets/js/2.5c19d7f6.js" defer></script><script src="/design-patterns/assets/js/8.cf52c015.js" defer></script>
  </body>
</html>
